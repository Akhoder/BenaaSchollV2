# โ ุชุญุฏูุซ ุฌุฏูู ุงูููุงุฏ - Subject Fields Update

## ๐ ุงูุชุงุฑูุฎ: ุฏูุณูุจุฑ 2024

---

## ๐ฏ ุงููุฏู

ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ ูุฌุฏูู `class_subjects` ูุชุญุณูู ุฅุฏุงุฑุฉ ูุนุฑุถ ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ.

---

## โ ุงูุญููู ุงููุถุงูุฉ

### 1. `description` (text, nullable)
- **ุงููุตู:** ุดุฑุญ ุงููุงุฏุฉ
- **ุงูุงุณุชุฎุฏุงู:** ูุตู ูุฎุชุตุฑ ูููุงุฏุฉ ุงูุฏุฑุงุณูุฉ
- **ุงูุนุฑุถ:** ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุงุฏ ูุตูุญุฉ ุนุฑุถ ุงููุงุฏุฉ

### 2. `objectives` (text[], nullable)
- **ุงููุตู:** ุฃูุฏุงู ุงููุงุฏุฉ (ูุตูููุฉ)
- **ุงูุงุณุชุฎุฏุงู:** ูุงุฆูุฉ ุจุงูุฃูุฏุงู ุงูุชุนููููุฉ
- **ุงูุนุฑุถ:** ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุงุฏ ูุตูุญุฉ ุนุฑุถ ุงููุงุฏุฉ
- **ุงูุฅุฏุฎุงู:** ูููู ุฅุถุงูุฉ/ุญุฐู ุฃูุฏุงู ูุชุนุฏุฏุฉ

### 3. `reference_url` (text, nullable)
- **ุงููุตู:** ุฑุงุจุท ุงููุฑุฌุน (Google Drive ุฃู ุฃู ูุฑุฌุน)
- **ุงูุงุณุชุฎุฏุงู:** ุฑุงุจุท ููููุงุฑุฏ ุงูุชุนููููุฉ
- **ุงูุนุฑุถ:** ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุงุฏ ูุตูุญุฉ ุนุฑุถ ุงููุงุฏุฉ
- **ุงููุธููุฉ:** ุฑุงุจุท ูุงุจู ููููุฑ ููุชุญ ูู ุชุจููุจ ุฌุฏูุฏ

### 4. `image_url` (text, nullable)
- **ุงููุตู:** ุตูุฑุฉ ุงููุงุฏุฉ
- **ุงูุงุณุชุฎุฏุงู:** ุตูุฑุฉ ุชูุซูููุฉ ูููุงุฏุฉ
- **ุงูุชุฎุฒูู:** Supabase Storage (bucket: `subject-images`)
- **ุงูุญุฏ ุงูุฃูุตู:** 5MB
- **ุงูุตูุบ ุงููุฏุนููุฉ:** PNG, JPG, JPEG, GIF, WEBP
- **ุงูุนุฑุถ:** ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุงุฏ ูุตูุญุฉ ุนุฑุถ ุงููุงุฏุฉ

### 5. `updated_at` (timestamptz)
- **ุงููุตู:** ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ
- **ุงูุงุณุชุฎุฏุงู:** ุชุชุจุน ุงูุชุบููุฑุงุช
- **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:** ูุชู ุชุญุฏูุซู ุชููุงุฆูุงู ุนูุฏ ุฃู ุชุนุฏูู

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### โ Migration:
- `supabase/migrations/20241220000000_add_subject_fields.sql`
  - ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ
  - ุฅูุดุงุก trigger ูุชุญุฏูุซ `updated_at`
  - ุฅูุดุงุก storage bucket ููุตูุฑ
  - ุฅูุดุงุก storage policies

### โ TypeScript Interfaces:
- `lib/supabase.ts`
  - ุชุญุฏูุซ `SubjectRow` interface

### โ ุตูุญุงุช ุงูุฅุฏุงุฑุฉ:
- `app/dashboard/subjects/page.tsx`
  - ุฅุถุงูุฉ ุญููู ุงูุฅุฏุฎุงู ูู Dialog
  - ุฏุนู ุฑูุน ุงูุตูุฑ
  - ุฅุฏุงุฑุฉ ุงูุฃูุฏุงู (ุฅุถุงูุฉ/ุญุฐู)
  - ุชุญุฏูุซ ุฏุงูุฉ `onSave`

### โ ุตูุญุงุช ุงูุนุฑุถ:
- `app/dashboard/my-classes/[classId]/subjects/[subjectId]/page.tsx`
  - ุนุฑุถ ุงูุตูุฑุฉ
  - ุนุฑุถ ุงููุตู
  - ุนุฑุถ ุงูุฃูุฏุงู
  - ุนุฑุถ ุฑุงุจุท ุงููุฑุฌุน

- `app/dashboard/my-classes/[classId]/page.tsx`
  - ุนุฑุถ ุงููุตู
  - ุนุฑุถ ุฑุงุจุท ุงููุฑุฌุน

### โ Functions:
- `lib/supabase.ts`
  - `uploadSubjectImage()` - ุฑูุน ุงูุตูุฑ
  - `deleteSubjectImage()` - ุญุฐู ุงูุตูุฑ
  - ุชุญุฏูุซ `fetchSubjectsForClass()` ูุฅุฑุฌุงุน ุงูุญููู ุงูุฌุฏูุฏุฉ

---

## ๐ง ุงูููุฒุงุช ุงููุถุงูุฉ

### 1. ุฑูุน ุงูุตูุฑ
- โ ุฑูุน ูุจุงุดุฑ ุฅูู Supabase Storage
- โ ูุนุงููุฉ ุงูุตูุฑุฉ ูุจู ุงูุญูุธ
- โ ุญุฐู ุงูุตูุฑุฉ
- โ ุชุญูู ูู ููุน ูุญุฌู ุงูููู

### 2. ุฅุฏุงุฑุฉ ุงูุฃูุฏุงู
- โ ุฅุถุงูุฉ ุฃูุฏุงู ูุชุนุฏุฏุฉ
- โ ุญุฐู ุฃูุฏุงู
- โ ุนุฑุถ ุงูุฃูุฏุงู ููุงุฆูุฉ

### 3. ุฑุงุจุท ุงููุฑุฌุน
- โ ุฅุฏุฎุงู URL
- โ ูุชุญ ูู ุชุจููุจ ุฌุฏูุฏ
- โ ุฃููููุฉ ExternalLink

---

## ๐ Storage Bucket

### Bucket: `subject-images`
- **Public:** ูุนู
- **Max File Size:** 5MB
- **Allowed Types:** image/jpeg, image/png, image/webp, image/gif

### Policies:
- **Upload:** Admins ู Teachers ููููุงุฏ ุงูุฎุงุตุฉ ุจูู
- **Read:** ุฌููุน ุงููุณุชุฎุฏููู ุงููุตุฑุญ ููู
- **Update/Delete:** Admins ู Teachers ููููุงุฏ ุงูุฎุงุตุฉ ุจูู

---

## โ ุงูุงุฎุชุจุงุฑุงุช

### โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช:
- โ Migration ุชู ุฅูุดุงุคู
- โ Interfaces ูุญุฏุซุฉ
- โ ุงูุตูุญุงุช ูุญุฏุซุฉ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูููุฏ
- โ All linter checks passed

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุทุจูู Migration:
```bash
# ูู Supabase Dashboard ุฃู CLI
# Migration: 20241220000000_add_subject_fields.sql
```

### 2. ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ:
1. ุงุฐูุจ ุฅูู `/dashboard/subjects`
2. ุงุถุบุท "Add Subject"
3. ุงููุฃ ุงูุญููู:
   - ุงุณู ุงููุงุฏุฉ (ูุทููุจ)
   - ุงููุตู (ูุทููุจ)
   - ุงููุนูู (ุงุฎุชูุงุฑู)
   - **ุงููุตู** (ุงุฎุชูุงุฑู)
   - **ุงูุฃูุฏุงู** (ุงุฎุชูุงุฑู) - ุงุถุบุท Enter ุฃู ุฒุฑ + ูุฅุถุงูุฉ
   - **ุฑุงุจุท ุงููุฑุฌุน** (ุงุฎุชูุงุฑู)
   - **ุตูุฑุฉ ุงููุงุฏุฉ** (ุงุฎุชูุงุฑู) - ุงุถุบุท ููุฑูุน

### 3. ุนุฑุถ ุงููุงุฏุฉ:
- ูู ุตูุญุฉ `/dashboard/my-classes/[classId]` - ุนุฑุถ ุงููุตู ูุงูุฑุงุจุท
- ูู ุตูุญุฉ `/dashboard/my-classes/[classId]/subjects/[subjectId]` - ุนุฑุถ ุฌููุน ุงูุญููู

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ ูุง ุชู ุฅูุฌุงุฒู:
1. โ ุฅุถุงูุฉ 5 ุญููู ุฌุฏูุฏุฉ
2. โ ุฏุนู ุฑูุน ุงูุตูุฑ ุฅูู Supabase Storage
3. โ ุชุญุฏูุซ ุฌููุน ุงูุตูุญุงุช ุฐุงุช ุงูุตูุฉ
4. โ ุชุญุฏูุซ TypeScript interfaces
5. โ ุฅูุดุงุก storage bucket ู policies

### โ๏ธ ููุงุญุธุงุช:
- Migration ูุฌุจ ุชุทุจููู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- Storage bucket ูุชู ุฅูุดุงุคู ุชููุงุฆูุงู ุนูุฏ ุชุทุจูู Migration
- ุงูุตูุฑ ุงููุฏููุฉ ูููู ุฑูุนูุง ูุงุญูุงู

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุฅุถุงูุฉ ุฌููุน ุงูุญููู ุงููุทููุจุฉ ุจูุฌุงุญ:
- โ `description` - ุดุฑุญ ุงููุงุฏุฉ
- โ `objectives` - ุฃูุฏุงู ุงููุงุฏุฉ (ูุตูููุฉ)
- โ `reference_url` - ุฑุงุจุท ุงููุฑุฌุน
- โ `image_url` - ุตูุฑุฉ ุงููุงุฏุฉ (Supabase Storage)
- โ `updated_at` - ุชุงุฑูุฎ ุงูุชุญุฏูุซ

**ุงููุธุงู ุงูุขู ูุฏุนู ูุนูููุงุช ุฃูุซุฑ ุชูุตููุงู ููููุงุฏ ุงูุฏุฑุงุณูุฉ!** ๐

---

*ุชู ุฅุนุฏุงุฏ ูุฐุง ุงูุชูุฑูุฑ ุจูุงุณุทุฉ AI Assistant*  
*ุชุงุฑูุฎ: ุฏูุณูุจุฑ 2024*  
*ุงููุณุฎุฉ: 1.0 - Subject Fields Update*

